(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{137:function(e,t,a){},175:function(e,t,a){},176:function(e,t,a){},177:function(e,t,a){},183:function(e,t,a){},184:function(e,t,a){},185:function(e,t,a){},204:function(e,t,a){},205:function(e,t,a){},206:function(e,t,a){},207:function(e,t,a){},208:function(e,t,a){},210:function(e,t,a){},211:function(e,t,a){},212:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){},225:function(e,t,a){},226:function(e,t,a){},228:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(40),s=a.n(c),i=(a(175),a(17)),l=a(10),o=(a(176),a(16)),d=a(18),j=a(19),u=a(105),b=a.n(u),m=a(87),p=a.n(m),h=a(88),O=a.n(h),x=(a(177),a(0)),g=function(e){var t=e.hasCartItems,a=e.hasTokenInLocalStorage;return Object(x.jsxs)("header",{className:"header",children:[Object(x.jsx)("div",{children:Object(x.jsx)(o.b,{to:"/",className:"shop-heading",children:Object(x.jsx)("h1",{children:"PLANTLEY"})})}),Object(x.jsxs)("div",{children:[Object(x.jsx)(o.b,{to:"/",className:"header-links",children:Object(x.jsx)("span",{children:"HOME"})}),Object(x.jsx)(o.b,{to:"/plants",className:"header-links shop",children:Object(x.jsx)("span",{children:"SHOP"})})]}),Object(x.jsxs)("ul",{className:"profile-and-cart",children:[Object(x.jsx)("li",{children:a?Object(x.jsx)(o.b,{to:"/users/profile",children:Object(x.jsx)(b.a,{className:"header-icons user-icon"})}):Object(x.jsx)(o.b,{to:"/login",children:Object(x.jsx)(b.a,{className:"header-icons user-icon"})})}),Object(x.jsx)("li",{className:"cart-icon",children:Object(x.jsx)(o.b,{to:"/cart",children:t?Object(x.jsx)(p.a,{className:"header-icons basket-icon-plus",color:"warning"}):Object(x.jsx)(O.a,{className:"header-icons basket-icon"})})})]})]})},f=(a(183),a(184),a(145)),v=a.n(f),y=function(e){var t=e.hasCartItems,a=e.hasTokenInLocalStorage;return Object(x.jsxs)("header",{className:"header-small",children:[Object(x.jsx)("nav",{className:"navbar",children:Object(x.jsx)("ul",{children:Object(x.jsxs)("div",{className:"dropdown",children:[Object(x.jsx)("button",{className:"dropbtn",children:Object(x.jsx)(v.a,{fontSize:"large"})}),Object(x.jsxs)("div",{className:"dropdown-content",children:[Object(x.jsx)("li",{children:Object(x.jsx)(o.b,{to:"/",className:"header-links-small",children:Object(x.jsx)("span",{children:"HOME"})})}),Object(x.jsx)("li",{children:Object(x.jsx)(o.b,{to:"/plants",className:"header-links-small",children:Object(x.jsx)("span",{children:"SHOP"})})}),Object(x.jsx)("li",{children:a?Object(x.jsx)(o.b,{to:"/users/profile",className:"header-links-small",children:Object(x.jsx)("span",{children:"PROFILE"})}):Object(x.jsx)(o.b,{to:"/login",className:"header-links-small",children:Object(x.jsx)("span",{children:"LOGIN"})})})]})]})})}),Object(x.jsx)("div",{className:"cart-small",children:Object(x.jsx)(o.b,{to:"/cart",children:t?Object(x.jsx)(p.a,{className:"header-icons basket-icon-plus",color:"warning"}):Object(x.jsx)(O.a,{className:"header-icons basket-icon"})})})]})},N=function(e){var t=e.hasCartItems,a=e.hasTokenInLocalStorage;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"header-big-screen",children:Object(x.jsx)(g,{hasCartItems:t,hasTokenInLocalStorage:a})}),Object(x.jsx)("div",{className:"header-small-screen",children:Object(x.jsx)(y,{hasCartItems:t,hasTokenInLocalStorage:a})})]})},S=a.p+"static/media/homepage-background.edbb654c.jpg",w=(a(185),function(){return Object(x.jsx)("section",{className:"homepage",children:Object(x.jsxs)("div",{className:"homepage-background",children:[Object(x.jsx)("div",{className:"homepage-background-image-wrapper",children:Object(x.jsx)("img",{src:S,alt:"homepage background, monstera plant",className:"homepage-background-image"})}),Object(x.jsx)("div",{className:"banner-text",children:Object(x.jsx)(o.b,{to:"/plants",className:"shop-now-link",children:"Shop now"})})]})})}),P=a(8),I=a(22),C=a.n(I),k=function(){return C()({method:"get",url:"/api/plants/"}).then((function(e){return e.data}))},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(j.useQuery)(Object(P.a)({queryKey:["getPlants"],queryFn:function(){return k().then((function(e){return e}))}},e)),a=t.data,r=t.isLoading,n=t.isError;return{plants:a,plantsLoading:r,plantsError:n}},L=a(310),q=a(313),F=a(312),T=a(301),D=a(311),B=(a(204),function(e){var t=e.image,a=e.name,r=e.price,n=e.id;return Object(x.jsx)(o.b,{to:"/plants/".concat(n),className:"plant-card-wrapper",children:Object(x.jsx)(L.a,{className:"plant-card",sx:{maxWidth:345},children:Object(x.jsxs)(D.a,{children:[Object(x.jsx)(F.a,{component:"img",height:"300",image:"static".concat(t),alt:a}),Object(x.jsxs)(q.a,{children:[Object(x.jsx)(T.a,{gutterBottom:!0,variant:"h6",component:"h6",align:"center",children:a}),Object(x.jsxs)(T.a,{variant:"body2",color:"text.secondary",align:"center",children:["\u20ac ",r]})]})]})})})}),M=(a(205),a(298)),z=(a(206),function(){return Object(x.jsx)("div",{className:"skeleton-group-wrapper",children:Object(x.jsxs)("div",{className:"skeleton-group",children:[Object(x.jsxs)("div",{className:"skeleton",children:[Object(x.jsx)(M.a,{variant:"rectangular",width:"100%",height:236}),Object(x.jsx)(M.a,{width:"90%",height:50}),Object(x.jsx)(M.a,{width:"60%"})]}),Object(x.jsxs)("div",{className:"skeleton",children:[Object(x.jsx)(M.a,{variant:"rectangular",width:"100%",height:236}),Object(x.jsx)(M.a,{width:"90%",height:50}),Object(x.jsx)(M.a,{width:"60%"})]}),Object(x.jsxs)("div",{className:"skeleton",children:[Object(x.jsx)(M.a,{variant:"rectangular",width:"100%",height:236}),Object(x.jsx)(M.a,{width:"90%",height:50}),Object(x.jsx)(M.a,{width:"60%"})]})]})})}),U=a.p+"static/media/something_went_wrong.3dee8401.jpg",A=(a(207),function(){return Object(x.jsx)("div",{className:"error-wrapper",children:Object(x.jsx)("div",{className:"error",children:Object(x.jsx)("div",{className:"something-went-wrong-wrapper",children:Object(x.jsx)("img",{src:U,alt:"something went wrong banner",className:"something-went-wrong"})})})})}),R=function(){var e=E(),t=e.plants,a=e.plantsLoading,r=e.plantsError;return Object(x.jsxs)(x.Fragment,{children:[a&&Object(x.jsx)(z,{}),r&&Object(x.jsx)(A,{}),t&&Object(x.jsxs)("section",{"data-testid":"plant-shop-page",className:"plant-shop-page",children:[Object(x.jsx)("h1",{children:"House Plants"}),Object(x.jsx)("div",{className:"plants-wrapper",children:Object(x.jsx)("div",{className:"plants",children:t.map((function(e){return Object(x.jsx)(B,{image:e.image,name:e.name,price:e.price,id:e.id},e.id)}))})})]})]})},W=function(e){return C()({method:"get",url:"/api/plants/".concat(e)}).then((function(e){return e.data}))},H=function(e){var t=Object(j.useQuery)({queryKey:["getPlant",e],queryFn:function(){return W(e).then((function(e){return e}))}});return{plantDetails:t.data,plantDetailsLoading:t.isLoading,plantDetailsError:t.isError}},_=a(297),J=a(146),Q=a.n(J),Y=a(293),K=r.forwardRef((function(e,t){return Object(x.jsx)(Y.a,Object(P.a)({elevation:6,ref:t,variant:"standard"},e))})),V=a(295),G=(a(208),r.createContext(void 0));function Z(e){var t=e.children,a=r.useState(1),n=Object(l.a)(a,2),c={state:{count:n[0]},setCount:n[1]};return Object(x.jsx)(G.Provider,{value:c,children:t})}var X=function(e){var t=e.plantDetails,a=e.handleAddToCart,n=function(){var e=r.useContext(G);if(void 0===e)throw new Error("useCount must be used within a CountProvider");return e}(),c=n.state.count,s=n.setCount,i=r.useState(!1),d=Object(l.a)(i,2),j=d[0],u=d[1],b=t.name,m=t.image,p=t.price,h=t.potSize,O=t.description,g=t.light,f=t.water,v=t.tips,y=t.toxicity,N=t.countInStock;r.useEffect((function(){return c<=1&&u(!0),function(){u(!1)}}),[c]),r.useEffect((function(){return function(){s(1)}}),[s]);var S=r.useState(!1),w=Object(l.a)(S,2),P=w[0],I=w[1],C=function(e,t){"clickaway"!==t&&I(!1)};return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{className:"plant-details-wrapper",children:Object(x.jsxs)("div",{className:"plant-details",children:[Object(x.jsxs)("div",{className:"pic-and-info",children:[Object(x.jsx)("div",{className:"plant-img-wrapper",children:Object(x.jsx)("img",{src:"static".concat(m),alt:b,className:"plant-img"})}),Object(x.jsxs)("div",{className:"info",children:[Object(x.jsx)(T.a,{gutterBottom:!0,variant:"h3",component:"h3",className:"plant-name",children:b}),Object(x.jsxs)(T.a,{gutterBottom:!0,variant:"h5",component:"h5",className:"price",children:["\u20ac ",p]}),h&&Object(x.jsxs)(T.a,{gutterBottom:!0,variant:"body1",children:["Pot size: ",h]}),Object(x.jsx)("br",{}),O&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(T.a,{gutterBottom:!0,variant:"h6",children:"Description"}),Object(x.jsx)(T.a,{gutterBottom:!0,variant:"body1",component:"p",className:"body-text",children:O})]}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),N?Object(x.jsxs)("div",{className:"add-to-cart",children:[Object(x.jsxs)("div",{className:"counter",children:[Object(x.jsx)("button",{className:"counter-action ".concat(j?"disable-decrement":"decrement"),onClick:function(){return s((function(e){return e-1}))},disabled:j,children:"-"}),Object(x.jsx)("span",{className:"counter-score",children:c}),Object(x.jsx)("button",{className:"counter-action increment",onClick:function(){return s((function(e){return e+1}))},children:"+"})]}),Object(x.jsx)(_.a,{onClick:function(){a(c,t.id,parseInt(t.price)),I(!0)},variant:"contained",endIcon:Object(x.jsx)(Q.a,{}),children:Object(x.jsx)(T.a,{variant:"button",children:" add to cart"})}),Object(x.jsx)("div",{children:Object(x.jsx)(V.a,{open:P,autoHideDuration:6e3,onClose:C,children:Object(x.jsxs)(K,{onClose:C,severity:"success",sx:{width:"100%"},children:["You've successfully added ".concat(c," ").concat(b," to your "),Object(x.jsx)(o.b,{to:"/cart",className:"cart-link",children:"cart"})]})})})]}):Object(x.jsx)("div",{children:Object(x.jsxs)(Y.a,{severity:"warning",children:["Sorry, ",b," is out of stock."]})}),Object(x.jsx)("br",{})]})]}),Object(x.jsx)("br",{}),Object(x.jsx)("div",{className:"care-wrapper",children:Object(x.jsxs)("div",{className:"care",children:[(g||f||y)&&Object(x.jsx)(T.a,{gutterBottom:!0,variant:"h6",children:"Care"}),g&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(T.a,{gutterBottom:!0,variant:"subtitle1",children:"Light"}),Object(x.jsx)(T.a,{gutterBottom:!0,variant:"body1",className:"body-text",children:g}),Object(x.jsx)("br",{})]}),f&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(T.a,{gutterBottom:!0,variant:"subtitle1",children:"Water"}),Object(x.jsx)(T.a,{gutterBottom:!0,variant:"body1",className:"body-text",children:f}),Object(x.jsx)("br",{}),Object(x.jsx)(T.a,{gutterBottom:!0,variant:"subtitle1",children:"Tips"}),Object(x.jsx)(T.a,{gutterBottom:!0,variant:"body1",className:"body-text",children:v}),Object(x.jsx)("br",{})]}),y&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(T.a,{gutterBottom:!0,variant:"subtitle1",children:"Toxicity"}),Object(x.jsx)(T.a,{gutterBottom:!0,variant:"body1",className:"body-text",children:y})]}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{})]})})]})})})},$=function(e){var t=e.handleAddToCart,a=Object(d.h)().id,r=H(a),n=r.plantDetails,c=r.plantDetailsLoading,s=r.plantDetailsError;return Object(x.jsxs)("section",{children:[c&&Object(x.jsx)(z,{}),!c&&s&&Object(x.jsx)(A,{}),n&&Object(x.jsx)(X,{plantDetails:n,handleAddToCart:t})]})},ee=a(31),te=(a(98),function(e){var t=e.handleLogIn,a=e.logInErrorMessage,r=Object(ee.b)({mode:"onBlur"}),n=r.register,c=r.handleSubmit,s=r.formState.errors;return Object(x.jsxs)("div",{className:"form-wrapper",children:[Object(x.jsxs)("form",{className:"form",onSubmit:c((function(e){t(e)})),children:[Object(x.jsx)("h1",{children:"Login"}),Object(x.jsxs)("section",{className:"log-in",children:[Object(x.jsx)("label",{htmlFor:"email",className:"label",children:"Email Address"}),Object(x.jsx)("input",Object(P.a)(Object(P.a)({id:"username","aria-invalid":s.email?"true":"false"},n("username",{required:"This is required.",pattern:{value:/\S+@\S+\.\S+/,message:"Value does not match email format."}})),{},{type:"email",placeholder:"Email"})),Object(x.jsx)("div",{className:"error-message-container",children:Object(x.jsx)("p",{className:s.username?"error-message":"error-message-hidden error-message",role:"alert",children:s.username&&s.username.message})}),Object(x.jsx)("label",{htmlFor:"password",className:"label",children:"Password"}),Object(x.jsx)("input",Object(P.a)(Object(P.a)({id:"password","aria-invalid":s.passward?"true":"false"},n("password",{required:"This is required.",minLength:{value:5,message:"Minimum length is 5 characters."}})),{},{type:"password",placeholder:"Password"})),Object(x.jsx)("div",{className:"error-message-container",children:Object(x.jsx)("p",{className:s.password?"error-message":"error-message-hidden error-message",role:"alert",children:s.password&&s.password.message})})]}),Object(x.jsx)("button",{type:"submit",className:"submit",children:"SUBMIT"}),a&&Object(x.jsx)("p",{className:"incorrect-details",children:a})]}),Object(x.jsxs)("p",{className:"register-link",children:["Don't have an account? ",Object(x.jsx)(o.b,{to:"/register",children:"Register"})]})]})}),ae={headers:{"Content-type":"application/json"}},re=function(e){return C.a.post("/api/users/login",e,ae).then((function(e){return e.data}))},ne=function(){var e=r.useState(""),t=Object(l.a)(e,2),a=t[0],n=t[1],c=function(e){var t=Object(d.g)(),a=Object(j.useMutation)((function(e){return re(e).then((function(e){return e}))}),{onSuccess:function(e){localStorage.setItem("token",e.token),t("/users/profile")},onError:function(t){e(t)}});return{logIn:a.mutate,logInLoading:a.isLoading,logInError:a.isError}}((function(e){var t,a;401===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)?n(null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.data.detail):n("Something went wrong, please try again.")})),s=c.logIn;return Object(x.jsx)("section",{className:"log-in-page",children:Object(x.jsx)(te,{handleLogIn:function(e){s(e)},logInErrorMessage:a})})},ce=function(e){var t=e.handleRegister,a=e.registerErrorMessage,r=Object(ee.b)({mode:"onBlur"}),n=r.register,c=r.handleSubmit,s=r.formState.errors;return Object(x.jsx)("div",{className:"form-wrapper",children:Object(x.jsxs)("form",{className:"form",onSubmit:c((function(e){t(e)})),children:[Object(x.jsx)("h1",{children:"Sign Up"}),Object(x.jsxs)("section",{className:"register",children:[Object(x.jsx)("label",{htmlFor:"email",className:"label",children:"Email Address"}),Object(x.jsx)("input",Object(P.a)(Object(P.a)({id:"email","aria-invalid":s.email?"true":"false"},n("email",{required:"This is required.",pattern:{value:/\S+@\S+\.\S+/,message:"Value does not match email format."}})),{},{type:"email",placeholder:"Email"})),Object(x.jsx)("div",{className:"error-message-container",children:Object(x.jsx)("p",{className:s.email?"error-message":"error-message-hidden error-message",role:"alert",children:s.email&&s.email.message})}),Object(x.jsx)("label",{htmlFor:"name",className:"label",children:"Full Name"}),Object(x.jsx)("input",Object(P.a)(Object(P.a)({id:"name","aria-invalid":s.name?"true":"false"},n("name",{required:"This is required.",minLength:{value:3,message:"Minimum length is 3 characters."}})),{},{type:"text",placeholder:"Full Name"})),Object(x.jsx)("div",{className:"error-message-container",children:Object(x.jsx)("p",{className:s.name?"error-message":"error-message-hidden error-message",role:"alert",children:s.name&&s.name.message})}),Object(x.jsx)("label",{htmlFor:"password",className:"label",children:"Password"}),Object(x.jsx)("input",Object(P.a)(Object(P.a)({id:"password","aria-invalid":s.passward?"true":"false"},n("password",{required:"This is required.",minLength:{value:5,message:"Minimum length is 5 characters."}})),{},{type:"password",placeholder:"Password"})),Object(x.jsx)("div",{className:"error-message-container",children:Object(x.jsx)("p",{className:s.password?"error-message":"error-message-hidden error-message",role:"alert",children:s.password&&s.password.message})})]}),Object(x.jsx)("button",{type:"submit",className:"submit",children:"SUBMIT"}),a&&Object(x.jsx)("p",{className:"incorrect-details",children:a})]})})},se={headers:{"Content-type":"application/json"}},ie=function(e){return C.a.post("/api/users/register",e,se).then((function(e){return e.data}))},le=function(){var e=r.useState(""),t=Object(l.a)(e,2),a=t[0],n=t[1],c=function(e){var t=Object(d.g)(),a=Object(j.useMutation)((function(e){return ie(e).then((function(e){return e}))}),{onSuccess:function(e){localStorage.setItem("token",e.token),t("/users/profile")},onError:function(t){e(t)}});return{register:a.mutate,registerLoading:a.isLoading,registerError:a.isError}}((function(e){var t,a,r;400===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)||401===(null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.status)?n(null===e||void 0===e||null===(r=e.response)||void 0===r?void 0:r.data.detail):n("Something went wrong, please try again.")})).register;return Object(x.jsx)("section",{className:"register-page",children:Object(x.jsx)(ce,{handleRegister:function(e){c(e)},registerErrorMessage:a})})},oe=function(){return"Bearer ".concat(localStorage.getItem("token"))},de={headers:{Authorization:oe()}},je=function(){return C.a.get("/api/users/profile",de).then((function(e){return e.data}))},ue=function(){var e=Object(j.useQuery)({queryKey:["getUserProfile"],queryFn:function(){return je().then((function(e){return e}))}});return{userProfile:e.data,userProfileLoading:e.isLoading,userProfileError:e.isError}},be=a(89),me=a.n(be),pe=(a(210),function(e){var t=e.handleLogOut,a=e.isUpdateUserProfileSuccess,r=e.updateUserProfileSuccessMessage,n=ue(),c=n.userProfile,s=n.userProfileLoading,i=n.userProfileError;return s?Object(x.jsx)(z,{}):!s&&i?Object(x.jsx)(A,{}):Object(x.jsx)("section",{className:"user-profile-wrapper",children:c&&Object(x.jsxs)("div",{className:"user-profile",children:[Object(x.jsxs)("div",{className:"heading-and-logout",children:[Object(x.jsx)("h1",{children:"Account Details "}),Object(x.jsx)(_.a,{onClick:function(){return t()},variant:"contained",endIcon:Object(x.jsx)(me.a,{}),children:Object(x.jsx)(T.a,{variant:"button",children:" Logout "})})]}),Object(x.jsxs)(T.a,{gutterBottom:!0,variant:"h6",className:"welcome-name",children:["Welcome, ",c.name]}),Object(x.jsx)("div",{className:"update-profile-link-wrapper",children:Object(x.jsx)(o.b,{to:"/users/profile/update",className:"update-profile-link",children:"Update Profile"})}),a&&Object(x.jsx)(Y.a,{sx:{width:"50%"},severity:"success",className:"update-profile-success-message",onClose:r,children:"Your profile was updated successfully!"}),Object(x.jsxs)("div",{className:"admin-functionality",children:[Object(x.jsx)("h1",{children:"My Orders"}),Object(x.jsx)("div",{className:"manage-profile-link-wrapper",children:Object(x.jsx)(o.b,{to:"/myorders",className:"manage-profile-link",children:"See Orders"})})]}),(null===c||void 0===c?void 0:c.isAdmin)&&Object(x.jsxs)("div",{className:"admin-functionality",children:[Object(x.jsx)("h1",{children:"Admin Functionality "}),Object(x.jsx)("div",{className:"manage-profile-link-wrapper",children:Object(x.jsx)(o.b,{to:"/admin/plantlist",className:"manage-profile-link",children:"Manage Products"})})]})]})})}),he=(a(211),a(212),function(e){var t=e.userProfile,a=e.handleUserProfileUpdate,r=e.updateUserProfileErrorMessage,n=Object(ee.b)({mode:"onBlur"}),c=n.register,s=n.handleSubmit,i=n.formState.errors;return Object(x.jsx)("div",{className:"user-update-form-wrapper",children:Object(x.jsxs)("form",{className:"form",onSubmit:s((function(e){a(e)})),children:[Object(x.jsxs)("section",{className:"register",children:[Object(x.jsx)("label",{htmlFor:"email",className:"label",children:"Email Address"}),Object(x.jsx)("input",Object(P.a)(Object(P.a)({id:"email","aria-invalid":i.email?"true":"false"},c("email",{required:"This is required.",maxLength:20,pattern:{value:/\S+@\S+\.\S+/,message:"Value does not match email format."},value:null===t||void 0===t?void 0:t.username})),{},{type:"email"})),Object(x.jsx)("div",{className:"error-message-container",children:Object(x.jsx)("p",{className:i.email?"error-message":"error-message-hidden error-message",role:"alert",children:i.email&&i.email.message})}),Object(x.jsx)("label",{htmlFor:"name",className:"label",children:"Full Name"}),Object(x.jsx)("input",Object(P.a)(Object(P.a)({id:"name","aria-invalid":i.name?"true":"false"},c("name",{required:"This is required.",minLength:{value:3,message:"Minimum length is 3 characters."},value:null===t||void 0===t?void 0:t.name})),{},{type:"text"})),Object(x.jsx)("div",{className:"error-message-container",children:Object(x.jsx)("p",{className:i.name?"error-message":"error-message-hidden error-message",role:"alert",children:i.name&&i.name.message})}),Object(x.jsx)("label",{htmlFor:"password",className:"label",children:"Password"}),Object(x.jsx)("input",Object(P.a)(Object(P.a)({id:"password","aria-invalid":i.passward?"true":"false"},c("password",{minLength:{value:5,message:"Minimum length is 5 characters."}})),{},{type:"password",placeholder:"Password"})),Object(x.jsx)("div",{className:"error-message-container",children:Object(x.jsx)("p",{className:i.password?"error-message":"error-message-hidden error-message",role:"alert",children:i.password&&i.password.message})})]}),Object(x.jsxs)("div",{className:"update-details-buttons",children:[Object(x.jsx)(o.b,{to:"/users/profile",className:"cancel-update",children:"CANCEL"}),Object(x.jsx)("button",{type:"submit",className:"submit-update",children:"SUBMIT"})]}),r&&Object(x.jsx)("p",{className:"incorrect-details",children:r})]})})}),Oe=function(e){var t=e.handleLogOut,a=e.updateUserProfileErrorMessage,r=e.handleUserProfileUpdate,n=ue(),c=n.userProfile,s=n.userProfileLoading,i=n.userProfileError;return s?Object(x.jsx)(z,{}):!s&&i?Object(x.jsx)(A,{}):Object(x.jsx)("section",{className:"user-profile-wrapper",children:c&&Object(x.jsxs)("div",{className:"user-profile",children:[Object(x.jsxs)("div",{className:"heading-and-logout",children:[Object(x.jsx)("h1",{children:"Account Details "}),Object(x.jsx)(_.a,{onClick:function(){return t()},variant:"contained",endIcon:Object(x.jsx)(me.a,{}),children:Object(x.jsx)(T.a,{variant:"button",children:" Logout "})})]}),Object(x.jsx)(T.a,{gutterBottom:!0,variant:"h6",className:"user-profile-update-heading",children:"Update your profile"}),Object(x.jsx)("div",{className:"user-profile-update-form",children:Object(x.jsx)(he,{userProfile:c,updateUserProfileErrorMessage:a,handleUserProfileUpdate:r})})]})})},xe=(a(213),a(214),a(147)),ge=a.n(xe),fe=function(e){var t=e.item,a=e.handleRemoveToCart,r=H(t.plantId.toString()),n=r.plantDetails,c=r.plantDetailsLoading,s=r.plantDetailsError,i=t.quantity*parseInt(null===n||void 0===n?void 0:n.price);return Object(x.jsxs)(x.Fragment,{children:[c&&Object(x.jsx)(z,{}),s&&Object(x.jsx)(A,{}),n&&Object(x.jsx)("div",{className:"cart-item",children:Object(x.jsxs)("div",{className:"cart-item-details",children:[Object(x.jsx)("div",{className:"cart-img-wrapper",children:Object(x.jsx)("img",{src:"static".concat(n.image),alt:n.name,className:"cart-img"})}),Object(x.jsxs)("div",{className:"name-and-size",children:[Object(x.jsx)(T.a,{gutterBottom:!0,variant:"h5",component:"h5",children:"".concat(n.name,", ").concat(n.potSize)}),Object(x.jsxs)("div",{className:"quantity-and-unit-price",children:[Object(x.jsxs)(T.a,{gutterBottom:!0,variant:"body1",children:["Quantity: ",t.quantity]}),Object(x.jsxs)(T.a,{gutterBottom:!0,variant:"body1",className:"unit-price",children:["Unit Price: ","\u20ac ".concat(n.price)]})]}),Object(x.jsxs)(T.a,{gutterBottom:!0,variant:"h6",children:["Total: ","\u20ac ".concat(i)]}),Object(x.jsx)(_.a,{onClick:function(){return a(n.id)},variant:"contained",endIcon:Object(x.jsx)(ge.a,{}),className:"remove-cart-button",color:"warning",children:Object(x.jsx)(T.a,{variant:"button",children:" Remove from cart "})})]})]})})]})},ve=a(302),ye=function(e){var t=e.cartArrayFromStorage,a=e.handleRemoveToCart,n=t.reduce((function(e,t){return e+t.quantity*t.plantUnitPrice}),0);return Object(x.jsxs)("div",{className:"cart",children:[Object(x.jsx)("div",{className:"cart-heading",children:t.length>0?Object(x.jsx)("h1",{className:"cart-heading",children:"Your cart"}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h1",{className:"cart-heading-empty",children:"Your cart is currently empty."}),Object(x.jsx)(o.b,{to:"/plants",className:"shop-cart-link",children:"Shop now"})]})}),Object(x.jsx)("div",{className:"cart-items",children:t.map((function(e){return Object(x.jsxs)(r.Fragment,{children:[Object(x.jsx)(fe,{item:e,handleRemoveToCart:a}),Object(x.jsx)(ve.a,{variant:"middle"})]},e.plantId)}))}),!!t.length&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("h1",{className:"total-price",children:["Total Price: \u20ac ","".concat(n)," "]}),Object(x.jsx)(_.a,{variant:"contained",size:"large",component:o.b,to:"/checkout/shipping",className:"checkout-button",children:Object(x.jsx)(T.a,{variant:"button",children:" Checkout "})})]})]})},Ne=function(e){var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),a=decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(a)},Se=function(e){var t={headers:{Authorization:oe(),"Content-type":"application/json"}};return C.a.put("/api/users/profile/update",e,t).then((function(e){return e.data}))},we=a(148),Pe=a.n(we),Ie=a(91),Ce=a.n(Ie),ke=(a(215),a(304)),Ee=a(308),Le=a(307),qe=a(303),Fe=a(305),Te=a(306),De=a(300),Be=a(314),Me=a(149),ze=a.n(Me),Ue=a(150),Ae=a.n(Ue),Re=a(95),We=a.n(Re),He=(a(225),function(e){var t=e.handleDeletePlant,a=e.deleteId,r=e.closeDeleteModal;return Object(x.jsxs)("div",{className:"delete-confirmation",children:[Object(x.jsx)("h1",{children:" Are you sure?"}),Object(x.jsxs)("div",{className:"delete-options",children:[Object(x.jsx)(_.a,{className:"yes",variant:"contained",color:"error",onClick:function(){return t(a)},children:"Yes, delete this plant."}),Object(x.jsx)(_.a,{variant:"contained",color:"inherit",onClick:r,children:"No, don't delete."})]})]})}),_e=function(e){var t={headers:{Authorization:oe(),"Content-type":"application/json"}};return C.a.delete("/api/plants/delete/".concat(e),t).then((function(e){return e.data}))},Je=(a(226),a(90)),Qe=a.n(Je),Ye=function(e){var t=e.handleCreatePlant,a=e.closeCreatePlantModal,r=e.createFailMessage,n=e.onFileChange,c=Object(ee.b)({mode:"onBlur"}),s=c.register,i=c.handleSubmit,l=c.formState.errors;return Object(x.jsx)("div",{children:Object(x.jsx)("div",{className:"create-plant-form-wrapper",children:Object(x.jsxs)("form",{className:"create-plant-form",onSubmit:i((function(e){t(e)})),children:[Object(x.jsxs)("div",{className:"heading-and-close",children:[Object(x.jsx)("h1",{children:"Create a plant item"}),Object(x.jsx)(Be.a,{onClick:a,children:Object(x.jsx)(Qe.a,{})})]}),Object(x.jsxs)("section",{children:[Object(x.jsxs)("div",{className:"plant-label-and-input",children:[Object(x.jsx)("label",{htmlFor:"name",className:"label",children:"Plant Name"}),Object(x.jsx)("input",Object(P.a)(Object(P.a)({id:"name","aria-invalid":l.name?"true":"false"},s("name",{required:"This is required."})),{},{type:"text",placeholder:"Plant Name"}))]}),Object(x.jsx)("div",{className:"error-message-container plant",children:Object(x.jsx)("p",{className:l.name?"error-message plant-form-error":"error-message-hidden error-message plant-form-error",role:"alert",children:l.name&&l.name.message})}),Object(x.jsxs)("div",{className:"plant-label-and-input",children:[Object(x.jsx)("label",{htmlFor:"price",className:"label",children:"Price"}),Object(x.jsx)("input",Object(P.a)(Object(P.a)({id:"price","aria-invalid":l.passward?"true":"false"},s("price",{required:"This is required."})),{},{type:"text",placeholder:"Price"}))]}),Object(x.jsx)("div",{className:"error-message-container",children:Object(x.jsx)("p",{className:l.price?"error-message plant-form-error":"error-message-hidden error-message plant-form-error",role:"alert",children:l.price&&l.price.message})}),Object(x.jsxs)("div",{className:"plant-label-and-input",children:[Object(x.jsx)("label",{htmlFor:"countInStock",className:"label",children:"Count"}),Object(x.jsx)("input",Object(P.a)(Object(P.a)({id:"countInStock"},s("countInStock",{required:"This is required."})),{},{type:"number",placeholder:"Count in stock"}))]}),Object(x.jsx)("div",{className:"error-message-container",children:Object(x.jsx)("p",{className:l.price?"error-message plant-form-error":"error-message-hidden error-message plant-form-error",role:"alert",children:l.countInStock&&l.countInStock.message})}),Object(x.jsxs)("div",{className:"plant-label-and-image-input",children:[Object(x.jsx)("label",{htmlFor:"image",className:"label",children:"Plant Image"}),Object(x.jsx)("input",Object(P.a)(Object(P.a)({id:"image"},s("image")),{},{type:"file",placeholder:"image",className:"image",onChange:function(e){var t=e.target.files;if(t){var a=t[0],r=new FormData;r.append("image",a),n(r)}}}))]}),Object(x.jsxs)("div",{className:"plant-label-and-input pot-size-wrapper",children:[Object(x.jsx)("label",{htmlFor:"potSize",className:"label",children:"Pot Size"}),Object(x.jsx)("input",Object(P.a)(Object(P.a)({id:"potSize"},s("potSize")),{},{type:"text",placeholder:"Pot Size"}))]}),Object(x.jsxs)("div",{className:"plant-label-and-input input-margin-top",children:[Object(x.jsx)("label",{htmlFor:"description",className:"label",children:"Description"}),Object(x.jsx)("textarea",Object(P.a)(Object(P.a)({id:"description"},s("description")),{},{placeholder:"Description",className:"textarea"}))]}),Object(x.jsxs)("div",{className:"plant-label-and-input input-margin-top",children:[Object(x.jsx)("label",{htmlFor:"potSize",className:"label",children:"Plant Size"}),Object(x.jsx)("input",Object(P.a)(Object(P.a)({id:"filterByPlantSize"},s("filterByPlantSize")),{},{type:"text",placeholder:"Plant size"}))]}),Object(x.jsxs)("div",{className:"plant-label-and-input input-margin-top",children:[Object(x.jsx)("label",{htmlFor:"ligtReq",className:"label",children:"Light"}),Object(x.jsx)("input",Object(P.a)(Object(P.a)({id:"filterByLightRequirements"},s("filterByLightRequirements")),{},{type:"text",placeholder:"Light requirements"}))]}),Object(x.jsxs)("div",{className:"plant-label-and-input input-margin-top",children:[Object(x.jsx)("label",{htmlFor:"light",className:"label",children:"Light"}),Object(x.jsx)("textarea",Object(P.a)(Object(P.a)({id:"light"},s("light")),{},{placeholder:"Light description",className:"textarea"}))]}),Object(x.jsxs)("div",{className:"plant-label-and-input input-margin-top",children:[Object(x.jsx)("label",{htmlFor:"water",className:"label",children:"Water"}),Object(x.jsx)("textarea",Object(P.a)(Object(P.a)({id:"water"},s("water")),{},{placeholder:"Water description",className:"textarea"}))]}),Object(x.jsxs)("div",{className:"plant-label-and-input input-margin-top",children:[Object(x.jsx)("label",{htmlFor:"tips",className:"label",children:"Tips"}),Object(x.jsx)("textarea",Object(P.a)(Object(P.a)({id:"tips"},s("tips")),{},{placeholder:"Tips description",className:"textarea"}))]}),Object(x.jsxs)("div",{className:"plant-label-and-input input-margin-top",children:[Object(x.jsx)("label",{htmlFor:"toxicity",className:"label",children:"Toxicity"}),Object(x.jsx)("textarea",Object(P.a)(Object(P.a)({id:"toxicity"},s("toxicity")),{},{placeholder:"Toxicity description",className:"textarea"}))]})]}),Object(x.jsx)("div",{className:"create-plant-butttons-wrapper",children:Object(x.jsxs)("div",{className:"create-plant-buttons",children:[r&&Object(x.jsx)("p",{className:"incorrect-details",children:r}),Object(x.jsx)(_.a,{onClick:a,variant:"contained",color:"inherit",children:Object(x.jsx)(T.a,{variant:"button",children:" Cancel"})}),Object(x.jsx)(_.a,{variant:"contained",color:"primary",className:"create-plant-submit-button",type:"submit",children:Object(x.jsx)(T.a,{variant:"button",children:" Create"})})]})})]})})})},Ke=function(e){var t={headers:{Authorization:oe(),"Content-type":"application/json"}};return C.a.post("/api/plants/create",e,t).then((function(e){return e.data}))},Ve=(a(137),function(e){var t=e.handleEditPlant,a=e.closeEditPlantModal,r=e.plantIdToEdit,n=e.editFailMessage,c=e.onFileChange,s=H(r).plantDetails,i=Object(ee.b)({mode:"onBlur"}),l=i.register,o=i.handleSubmit,d=i.formState.errors;return Object(x.jsx)("div",{children:s&&Object(x.jsx)("div",{className:"create-plant-form-wrapper",children:Object(x.jsxs)("form",{className:"create-plant-form",onSubmit:o((function(e){t(e)})),children:[Object(x.jsxs)("div",{className:"heading-and-close",children:[Object(x.jsx)("h1",{children:"Edit a plant item"}),Object(x.jsx)(Be.a,{onClick:a,children:Object(x.jsx)(Qe.a,{})})]}),Object(x.jsxs)("section",{children:[Object(x.jsxs)("div",{className:"plant-label-and-input",children:[Object(x.jsx)("label",{htmlFor:"name",className:"label",children:"Plant Name"}),Object(x.jsx)("input",Object(P.a)(Object(P.a)({id:"name","aria-invalid":d.name?"true":"false"},l("name",{required:"This is required.",value:null===s||void 0===s?void 0:s.name})),{},{type:"text"}))]}),Object(x.jsx)("div",{className:"error-message-container plant",children:Object(x.jsx)("p",{className:d.name?"error-message plant-form-error":"error-message-hidden error-message plant-form-error",role:"alert",children:d.name&&d.name.message})}),Object(x.jsxs)("div",{className:"plant-label-and-input",children:[Object(x.jsx)("label",{htmlFor:"price",className:"label",children:"Price"}),Object(x.jsx)("input",Object(P.a)(Object(P.a)({id:"price","aria-invalid":d.passward?"true":"false"},l("price",{required:"This is required.",value:null===s||void 0===s?void 0:s.price})),{},{type:"text",placeholder:"Price"}))]}),Object(x.jsx)("div",{className:"error-message-container",children:Object(x.jsx)("p",{className:d.price?"error-message plant-form-error":"error-message-hidden error-message plant-form-error",role:"alert",children:d.price&&d.price.message})}),Object(x.jsxs)("div",{className:"plant-label-and-input",children:[Object(x.jsx)("label",{htmlFor:"countInStock",className:"label",children:"Count"}),Object(x.jsx)("input",Object(P.a)(Object(P.a)({id:"countInStock"},l("countInStock",{required:"This is required.",value:null===s||void 0===s?void 0:s.countInStock})),{},{type:"number"}))]}),Object(x.jsx)("div",{className:"error-message-container",children:Object(x.jsx)("p",{className:d.price?"error-message plant-form-error":"error-message-hidden error-message plant-form-error",role:"alert",children:d.countInStock&&d.countInStock.message})}),Object(x.jsxs)("div",{className:"plant-label-and-image-input",children:[Object(x.jsx)("label",{htmlFor:"image",className:"label",children:"Plant Image"}),Object(x.jsxs)("div",{className:"image-edit-input-wrapper",children:[Boolean(s.image)&&Object(x.jsx)("input",{type:"text",value:s.image,className:"image-input-edit"}),Object(x.jsx)("input",Object(P.a)(Object(P.a)({id:"image"},l("image",{value:null===s||void 0===s?void 0:s.image})),{},{type:"file",onChange:function(e){var t=e.target.files;if(t){var a=t[0],r=new FormData;r.append("image",a),c(r)}}}))]})]}),Object(x.jsxs)("div",{className:"plant-label-and-input pot-size-wrapper",children:[Object(x.jsx)("label",{htmlFor:"potSize",className:"label",children:"Pot Size"}),Object(x.jsx)("input",Object(P.a)(Object(P.a)({id:"potSize"},l("potSize",{value:null===s||void 0===s?void 0:s.potSize})),{},{type:"text",placeholder:"Pot Size"}))]}),Object(x.jsxs)("div",{className:"plant-label-and-input input-margin-top",children:[Object(x.jsx)("label",{htmlFor:"description",className:"label",children:"Description"}),Object(x.jsx)("textarea",Object(P.a)(Object(P.a)({id:"description"},l("description",{value:null===s||void 0===s?void 0:s.description})),{},{placeholder:"Description",className:"textarea"}))]}),Object(x.jsxs)("div",{className:"plant-label-and-input input-margin-top",children:[Object(x.jsx)("label",{htmlFor:"potSize",className:"label",children:"Plant Size"}),Object(x.jsx)("input",Object(P.a)(Object(P.a)({id:"filterByPlantSize"},l("filterByPlantSize",{value:null===s||void 0===s?void 0:s.filterByPlantSize})),{},{type:"text",placeholder:"Plant size"}))]}),Object(x.jsxs)("div",{className:"plant-label-and-input input-margin-top",children:[Object(x.jsx)("label",{htmlFor:"ligtReq",className:"label",children:"Light"}),Object(x.jsx)("input",Object(P.a)(Object(P.a)({id:"filterByLightRequirements"},l("filterByLightRequirements",{value:null===s||void 0===s?void 0:s.filterByLightRequirements})),{},{type:"text",placeholder:"Light requirements"}))]}),Object(x.jsxs)("div",{className:"plant-label-and-input input-margin-top",children:[Object(x.jsx)("label",{htmlFor:"light",className:"label",children:"Light"}),Object(x.jsx)("textarea",Object(P.a)(Object(P.a)({id:"light"},l("light",{value:null===s||void 0===s?void 0:s.light})),{},{placeholder:"Light description",className:"textarea"}))]}),Object(x.jsxs)("div",{className:"plant-label-and-input input-margin-top",children:[Object(x.jsx)("label",{htmlFor:"water",className:"label",children:"Water"}),Object(x.jsx)("textarea",Object(P.a)(Object(P.a)({id:"water"},l("water",{value:null===s||void 0===s?void 0:s.water})),{},{placeholder:"Water description",className:"textarea"}))]}),Object(x.jsxs)("div",{className:"plant-label-and-input input-margin-top",children:[Object(x.jsx)("label",{htmlFor:"tips",className:"label",children:"Tips"}),Object(x.jsx)("textarea",Object(P.a)(Object(P.a)({id:"tips"},l("tips",{value:null===s||void 0===s?void 0:s.tips})),{},{placeholder:"Tips description",className:"textarea"}))]}),Object(x.jsxs)("div",{className:"plant-label-and-input input-margin-top",children:[Object(x.jsx)("label",{htmlFor:"toxicity",className:"label",children:"Toxicity"}),Object(x.jsx)("textarea",Object(P.a)(Object(P.a)({id:"toxicity"},l("toxicity",{value:null===s||void 0===s?void 0:s.toxicity})),{},{placeholder:"Toxicity description",className:"textarea"}))]})]}),Object(x.jsx)("div",{className:"create-plant-butttons-wrapper",children:Object(x.jsxs)("div",{className:"create-plant-buttons",children:[n&&Object(x.jsx)("p",{className:"incorrect-details",children:n}),Object(x.jsx)(_.a,{onClick:a,variant:"contained",color:"inherit",children:Object(x.jsx)(T.a,{variant:"button",children:" Cancel"})}),Object(x.jsx)(_.a,{variant:"contained",color:"primary",className:"create-plant-submit-button",type:"submit",children:Object(x.jsx)(T.a,{variant:"button",children:" Edit"})})]})})]})})})}),Ge=function(e,t){var a={headers:{Authorization:oe(),"Content-type":"application/json"}};return C.a.put("/api/plants/update/".concat(t),e,a).then((function(e){return e.data}))},Ze=a(299),Xe=a(21),$e=a.n(Xe),et=a(27),tt=function(){var e=Object(et.a)($e.a.mark((function e(t){var a,r;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"multipart/form-data",Authorization:oe()}},e.next=3,C.a.post("/api/plants/upload",t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),at=tt;var rt=function(){var e=r.useState(!1),t=Object(l.a)(e,2),a=t[0],n=t[1],c=r.useState(!1),s=Object(l.a)(c,2),i=s[0],d=s[1],u=r.useState(""),b=Object(l.a)(u,2),m=b[0],p=b[1],h=r.useState(!1),O=Object(l.a)(h,2),g=O[0],f=O[1],v=r.useState(""),y=Object(l.a)(v,2),N=y[0],S=y[1],w=r.useState(""),P=Object(l.a)(w,2),I=P[0],C=P[1],k=r.useState(""),L=Object(l.a)(k,2),q=L[0],F=L[1],D=r.useState(null),B=Object(l.a)(D,2),M=B[0],U=B[1],R=r.useState(!1),W=Object(l.a)(R,2),H=W[0],J=W[1],Q=r.useState(!1),Y=Object(l.a)(Q,2),G=Y[0],Z=Y[1],X=r.useState(!1),$=Object(l.a)(X,2),ee=$[0],te=$[1],ae=r.useState(!1),re=Object(l.a)(ae,2),ne=re[0],ce=re[1],se=function(e,t){"clickaway"!==t&&J(!1)},ie=function(e,t){"clickaway"!==t&&Z(!1)},le=function(e,t){"clickaway"!==t&&te(!1)},oe=function(e,t){"clickaway"!==t&&ce(!1)},de=E(),je=de.plants,ue=de.plantsLoading,be=de.plantsError,me=function(){n(!1)},pe=function(){d(!1)},he=function(){f(!1)},Oe=Object(j.useQueryClient)(),xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(j.useMutation)(at,e),a=t.mutate,r=t.isLoading,n=t.isError;return{uploadPlantImage:a,plantImageUploadLoading:r,plantImageUploadError:n}}({onSuccess:function(e){Oe.invalidateQueries(["getPlant",e.id],{exact:!0})}}),ge=xe.uploadPlantImage,fe=function(e){M&&(M.append("plant_id",e),ge(M))},ve=function(e,t){var a=Object(j.useMutation)((function(e){return Ke(e).then((function(e){return e}))}),{onSuccess:function(t){e(t)},onError:function(e){t(e)}});return{createPlant:a.mutate,createPlantLoading:a.isLoading,createPlantError:a.isError}}((function(e){n(!1),J(!0),Oe.invalidateQueries(["getPlants"],{exact:!0}),fe(e.id.toString())}),(function(e){var t,a;401===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)?C(null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.data.detail):C("Something went wrong, please try again.")})),ye=ve.createPlant,Ne=function(e,t){var a=Object(j.useMutation)((function(e){var t=e.formData,a=e.id;return Ge(t,a).then((function(e){return e}))}),{onSuccess:function(){e()},onError:function(e){t(e)}});return{updatePlantItem:a.mutate,updatePlantItemLoading:a.isLoading,updatePlantItemError:a.isError}}((function(){d(!1),Z(!0),Oe.invalidateQueries(["getPlants"],{exact:!0}),Oe.invalidateQueries(["getPlant",m],{exact:!0}),fe(m)}),(function(e){var t,a;401===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)?F(null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.data.detail):F("Something went wrong, please try again.")})),Se=Ne.updatePlantItem,we=function(e,t){var a=Object(j.useMutation)((function(e){return _e(e).then((function(e){return e}))}),{onSuccess:function(){e()},onError:function(){t()}});return{deletePlantItem:a.mutate,deletePlantItemLoading:a.isLoading,deletePlantItemError:a.isError}}((function(){te(!0),Oe.invalidateQueries(["getPlants"],{exact:!0})}),(function(){ce(!0)})),Ie=we.deletePlantItem;if(ue)return Object(x.jsx)(z,{});if(!ue&&be)return Object(x.jsx)(A,{});if(!je)return null;var Me=je.map((function(e){return{id:e.id,name:e.name,potSize:e.potSize,price:"\u20ac".concat(e.price)}}));return Object(x.jsxs)(Ze.a,{container:!0,direction:"column",sx:{px:8,py:4},children:[Object(x.jsx)("section",{className:"admin-plant-list-page-wrapper",children:Object(x.jsxs)("div",{className:"admin-plant-list-page",children:[Object(x.jsxs)(o.b,{to:"/users/profile",className:"go-back-link",children:[Object(x.jsx)("div",{children:Object(x.jsx)(Ce.a,{fontSize:"small"})}),Object(x.jsx)("p",{children:"go back"})]}),Object(x.jsxs)("div",{className:"heading-and-create-button",children:[Object(x.jsx)("h1",{children:"Manage plants"}),Object(x.jsx)(_.a,{variant:"contained",endIcon:Object(x.jsx)(Pe.a,{}),onClick:function(){n(!0)},children:Object(x.jsx)(T.a,{variant:"button",children:"Create"})})]}),Object(x.jsx)("div",{children:Object(x.jsx)(V.a,{open:H,autoHideDuration:6e3,onClose:se,children:Object(x.jsx)(K,{onClose:se,severity:"success",children:"Plant item was successfully added."})})}),Object(x.jsx)("div",{children:Object(x.jsx)(V.a,{open:G,autoHideDuration:6e3,onClose:ie,children:Object(x.jsx)(K,{onClose:ie,severity:"success",children:"Plant item was successfully updated."})})}),Object(x.jsx)("div",{children:Object(x.jsx)(V.a,{open:ee,autoHideDuration:6e3,onClose:le,children:Object(x.jsx)(K,{onClose:le,severity:"success",children:"Plant item was successfully deleted."})})}),Object(x.jsx)("div",{children:Object(x.jsx)(V.a,{open:ne,autoHideDuration:6e3,onClose:oe,children:Object(x.jsx)(K,{onClose:oe,severity:"error",children:"Something went wrong, please try again."})})}),Object(x.jsx)(qe.a,{component:De.a,children:Object(x.jsxs)(ke.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(x.jsx)(Fe.a,{children:Object(x.jsxs)(Te.a,{children:[Object(x.jsx)(Le.a,{children:"ID"}),Object(x.jsx)(Le.a,{children:"Plant Name"}),Object(x.jsx)(Le.a,{children:"Pot Size"}),Object(x.jsx)(Le.a,{children:"Price"}),Object(x.jsx)(Le.a,{children:"Edit"}),Object(x.jsx)(Le.a,{children:"Delete"})]})}),Object(x.jsx)(Ee.a,{children:Me.map((function(e){return Object(x.jsxs)(Te.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(x.jsx)(Le.a,{children:e.id}),Object(x.jsx)(Le.a,{component:"th",scope:"row",children:Object(x.jsxs)(o.b,{to:"/plants/".concat(e.id),className:"plant-name-link",children:[" ",e.name]})}),Object(x.jsx)(Le.a,{children:e.potSize}),Object(x.jsx)(Le.a,{children:e.price}),Object(x.jsx)(Le.a,{children:Object(x.jsx)(Be.a,{onClick:function(){return t=e.id,d(!0),void p(t.toString());var t},children:Object(x.jsx)(ze.a,{})})}),Object(x.jsx)(Le.a,{children:Object(x.jsx)(Be.a,{onClick:function(){return t=e.id,f(!0),void S(t.toString());var t},children:Object(x.jsx)(Ae.a,{})})})]},e.id)}))})]})})]})}),Object(x.jsx)(We.a,{isOpen:a,onRequestClose:me,contentLabel:"Create a plant item",ariaHideApp:!1,className:"Modal-Create-Plant",overlayClassName:"Overlay-Create-Plant",children:Object(x.jsx)(Ye,{handleCreatePlant:function(e){ye(e)},closeCreatePlantModal:me,createFailMessage:I,onFileChange:U})}),Object(x.jsx)(We.a,{isOpen:i,onRequestClose:pe,contentLabel:"Edit a plant item",ariaHideApp:!1,className:"Modal-Edit-Plant",overlayClassName:"Overlay-Edit-Plant",children:Object(x.jsx)(Ve,{handleEditPlant:function(e){Se({formData:e,id:m})},closeEditPlantModal:pe,plantIdToEdit:m,editFailMessage:q,onFileChange:U})}),Object(x.jsx)(We.a,{isOpen:g,onRequestClose:he,contentLabel:"Delete Confirmation",ariaHideApp:!1,className:"Modal-Delete",overlayClassName:"Overlay-Delete",children:Object(x.jsx)(He,{handleDeletePlant:function(e){Ie(e),f(!1)},deleteId:N,closeDeleteModal:he})})]})},nt=a(296),ct=a(315),st=a(294),it=[{id:0,url:"shipping",label:"Shipping"},{id:1,url:"place-order",label:"Place Order"}],lt=function(){var e,t,a=Object(d.f)().pathname,r=null!==(e=null===(t=it.find((function(e){var t=e.url;return a.includes(t)})))||void 0===t?void 0:t.id)&&void 0!==e?e:0;return Object(x.jsxs)(Ze.a,{container:!0,direction:"column",sx:{py:4,px:8},children:[Object(x.jsx)(Ze.a,{item:!0,xs:12,children:Object(x.jsx)(nt.a,{activeStep:r,alternativeLabel:!0,children:it.map((function(e){var t=e.url,a=e.label;return Object(x.jsx)(ct.a,{children:Object(x.jsx)(st.a,{children:a})},t)}))})}),Object(x.jsx)(d.a,{})]})},ot=a(290),dt={address:"",city:"",postalCode:"",country:""},jt=function(){var e=Object(d.g)(),t=Object(ee.b)({defaultValues:dt}),a=t.control,r=t.handleSubmit;return Object(x.jsxs)(Ze.a,{container:!0,direction:"column",spacing:3,children:[Object(x.jsx)(Ze.a,{item:!0,children:Object(x.jsx)("h1",{children:"Shipping"})}),Object(x.jsx)(Ze.a,{item:!0,children:Object(x.jsx)("form",{onSubmit:r((function(t){localStorage.setItem("checkout.shipping",JSON.stringify(t)),e("/checkout/place-order")})),children:Object(x.jsxs)(Ze.a,{container:!0,direction:"column",spacing:2,children:[Object(x.jsx)(Ze.a,{item:!0,children:Object(x.jsx)(ee.a,{control:a,name:"address",rules:{required:"Address is required"},render:function(e){var t,a=e.field,r=e.fieldState;return Object(x.jsx)(ot.a,Object(P.a)(Object(P.a)({fullWidth:!0},a),{},{error:Boolean(r.error),helperText:null===(t=r.error)||void 0===t?void 0:t.message,label:"Address"}))}})}),Object(x.jsx)(Ze.a,{item:!0,children:Object(x.jsx)(ee.a,{control:a,name:"city",rules:{required:"City is required"},render:function(e){var t,a=e.field,r=e.fieldState;return Object(x.jsx)(ot.a,Object(P.a)(Object(P.a)({fullWidth:!0},a),{},{error:Boolean(r.error),helperText:null===(t=r.error)||void 0===t?void 0:t.message,label:"City"}))}})}),Object(x.jsx)(Ze.a,{item:!0,children:Object(x.jsx)(ee.a,{control:a,name:"postalCode",rules:{required:"Postal code is required"},render:function(e){var t,a=e.field,r=e.fieldState;return Object(x.jsx)(ot.a,Object(P.a)(Object(P.a)({fullWidth:!0},a),{},{error:Boolean(r.error),helperText:null===(t=r.error)||void 0===t?void 0:t.message,label:"Postal code"}))}})}),Object(x.jsx)(Ze.a,{item:!0,children:Object(x.jsx)(ee.a,{control:a,name:"country",rules:{required:"Country is required"},render:function(e){var t,a=e.field,r=e.fieldState;return Object(x.jsx)(ot.a,Object(P.a)(Object(P.a)({fullWidth:!0},a),{},{error:Boolean(r.error),helperText:null===(t=r.error)||void 0===t?void 0:t.message,label:"Country"}))}})}),Object(x.jsx)(Ze.a,{item:!0,children:Object(x.jsx)(_.a,{variant:"contained",size:"large",type:"submit",children:"Continue"})})]})})})]})},ut=a(50),bt=a(289),mt=a(316),pt=function(e){var t={headers:{Authorization:oe()}};return C.a.post("/api/orders/add/",e,t).then((function(e){return e.data}))},ht=function(e){var t=e.emptyCart,a=Object(ut.a)(),n=Object(d.g)(),c=Object(bt.a)(a.breakpoints.down("lg")),s=r.useMemo((function(){var e=localStorage.getItem("checkout.shipping");return e?JSON.parse(e):null}),[]),l=function(){var e=r.useMemo((function(){var e=localStorage.getItem("cartItems");return e?JSON.parse(e):null}),[]),t=E({enabled:Boolean(e)}),a=t.plants,n=t.plantsLoading,c=t.plantsError;return{plants:e&&a?a.reduce((function(t,a){var r=e.find((function(e){return e.plantId===a.id}));return r?[].concat(Object(i.a)(t),[Object(P.a)(Object(P.a)({},a),{},{qty:r.quantity})]):t}),[]):[],plantsLoading:n,plantsError:c}}(),o=l.plants,u=l.plantsLoading,b=l.plantsError,m=function(e){var t=Object(j.useMutation)((function(e){return pt(e).then((function(e){return e}))}),{onSuccess:function(t){e(t.id)}});return{createOrder:t.mutate,createOrderLoading:t.isLoading,createOrderError:t.isError}}((function(e){t(),n("/order/".concat(e))})),p=m.createOrder,h=m.createOrderLoading,O=m.createOrderError,g=c?{direction:"column-reverse"}:{direction:"row"};if(!s)return n("/checkout/shipping"),null;var f=s.address,v=s.city,y=s.postalCode,N=s.country;if(u)return Object(x.jsx)(z,{});if(!u&&b)return Object(x.jsx)(A,{});var S=o.reduce((function(e,t){return e+ +t.price*t.qty}),0),w=.135*S,I=S+w+5;return Object(x.jsxs)(Ze.a,Object(P.a)(Object(P.a)({container:!0,spacing:8,sx:{p:4}},g),{},{children:[Object(x.jsxs)(Ze.a,{item:!0,xs:12,lg:8,children:[Object(x.jsx)(T.a,{variant:"h5",gutterBottom:!0,component:"h5",children:"Shipping"}),Object(x.jsxs)(T.a,{variant:"body1",gutterBottom:!0,children:[f,", ",v,", ",y,", ",N]}),Object(x.jsx)(ve.a,{sx:{my:3}}),Object(x.jsx)(T.a,{variant:"h5",gutterBottom:!0,component:"h5",children:"Payment method"}),Object(x.jsx)(T.a,{variant:"body1",gutterBottom:!0,children:"stripe"}),Object(x.jsx)(ve.a,{sx:{my:3}}),Object(x.jsxs)(mt.a,{children:[Object(x.jsx)(T.a,{variant:"h5",gutterBottom:!0,component:"h5",children:"Order items"}),o.map((function(e){var t=e.name,a=e.qty,r=e.price;return Object(x.jsxs)(mt.a,{sx:{display:"flex",justifyContent:"space-between",pt:2},children:[Object(x.jsx)(mt.a,{component:"span",children:t}),Object(x.jsxs)(mt.a,{component:"span",children:[a," x \u20ac ",r]})]},t)}))]})]}),Object(x.jsxs)(Ze.a,{item:!0,xs:12,lg:4,children:[Object(x.jsxs)(mt.a,{sx:{border:1,borderRadius:1,color:"text.primary"},children:[Object(x.jsx)(T.a,{variant:"h5",component:"h5",sx:{p:1,color:"text.primary"},children:"Order summary"}),Object(x.jsxs)(T.a,{variant:"body1",sx:{display:"flex",justifyContent:"space-between",borderTop:1,p:1,color:"text.primary"},children:[Object(x.jsx)(mt.a,{component:"span",children:"Items:"}),Object(x.jsx)(mt.a,{component:"span",children:S.toFixed(2)})]}),Object(x.jsxs)(T.a,{variant:"body1",sx:{display:"flex",justifyContent:"space-between",borderTop:1,p:1,color:"text.primary"},children:[Object(x.jsx)(mt.a,{component:"span",children:"Tax:"}),Object(x.jsx)(mt.a,{component:"span",children:w.toFixed(2)})]}),Object(x.jsxs)(T.a,{variant:"body1",sx:{display:"flex",justifyContent:"space-between",borderTop:1,p:1,color:"text.primary"},children:[Object(x.jsx)(mt.a,{component:"span",children:"Shipping:"}),Object(x.jsx)(mt.a,{component:"span",children:5..toFixed(2)})]}),Object(x.jsxs)(T.a,{variant:"body1",sx:{display:"flex",justifyContent:"space-between",borderTop:1,p:1,color:"text.primary"},children:[Object(x.jsx)(mt.a,{component:"span",children:"Total:"}),Object(x.jsx)(mt.a,{component:"span",children:I.toFixed(2)})]})]}),Object(x.jsxs)(mt.a,{sx:{pt:2},children:[Object(x.jsx)(_.a,{variant:"contained",fullWidth:!0,size:"large",disabled:h,onClick:function(){p({totalPrice:I.toString(),taxPrice:w.toString(),shippingPrice:5..toString(),shippingAddress:s,paymentMethod:"stripe",orderItems:o.map((function(e){var t=e.id,a=e.price;return{qty:e.qty,plantId:t,price:+a}}))})},children:"Place order"}),O&&Object(x.jsx)(Y.a,{sx:{width:"90%",mt:2},severity:"error",children:"Something went wrong, please try again."})]})]})]}))};var Ot={headers:{Authorization:oe()}},xt=function(e){return C.a.get("/api/orders/".concat(e),Ot).then((function(e){return e.data}))},gt=function(e){var t=Object(j.useQuery)({queryKey:["getOrder",e],queryFn:function(){return xt(e).then((function(e){return e}))}});return{orderDetails:t.data,orderDetailsLoading:t.isLoading,orderDetailsError:t.isError}},ft=function(){var e=Object(d.h)().id,t=Object(d.f)().pathname,a=Object(ut.a)(),r=gt(e),n=r.orderDetails,c=r.orderDetailsLoading,s=r.orderDetailsError,i=Object(bt.a)(a.breakpoints.down("lg"));if(c)return Object(x.jsx)(z,{});if(s)return Object(x.jsx)(A,{});var l=n,j=l.shippingAddress,u=j.address,b=j.city,m=j.postalCode,p=j.country,h=l.paymentMethod,O=l.orderItems,g=l.taxPrice,f=l.shippingPrice,v=l.totalPrice,y=l.isDelivered,N=l.deliveredAt,S=l.isPaid,w=l.paidAt,I=O.reduce((function(e,t){return+e+ +t.price}),0),C=i?{direction:"column-reverse"}:{direction:"row"};return Object(x.jsxs)(Ze.a,Object(P.a)(Object(P.a)({container:!0,spacing:8,sx:{p:4}},C),{},{children:[Object(x.jsxs)(Ze.a,{item:!0,xs:12,lg:8,children:[Object(x.jsx)(T.a,{variant:"h5",gutterBottom:!0,component:"h5",children:"Shipping"}),Object(x.jsxs)(T.a,{variant:"body1",gutterBottom:!0,children:[u,", ",b,", ",m,", ",p]}),y?Object(x.jsxs)(Y.a,{children:["Delivered on ",N]}):Object(x.jsx)(Y.a,{severity:"warning",children:"Not delivered"}),Object(x.jsx)(ve.a,{sx:{my:3}}),Object(x.jsx)(T.a,{variant:"h5",gutterBottom:!0,component:"h5",children:"Payment method"}),Object(x.jsx)(T.a,{variant:"body1",gutterBottom:!0,children:h}),S&&w?Object(x.jsxs)(Y.a,{children:["Paid on"," ",new Date(w).toLocaleDateString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",weekday:"long",hour:"2-digit",hour12:!1,minute:"2-digit",second:"2-digit"})]}):Object(x.jsx)(Y.a,{severity:"warning",children:"Not paid"}),Object(x.jsx)(ve.a,{sx:{my:3}}),Object(x.jsxs)(mt.a,{children:[Object(x.jsx)(T.a,{variant:"h5",gutterBottom:!0,component:"h5",children:"Order items"}),O.map((function(e){var t=e.name,a=e.qty,r=e.price;return Object(x.jsxs)(mt.a,{sx:{display:"flex",justifyContent:"space-between",pt:2},children:[Object(x.jsx)(mt.a,{component:"span",children:t}),Object(x.jsxs)(mt.a,{component:"span",children:[a," x \u20ac ",r]})]},t)}))]})]}),Object(x.jsxs)(Ze.a,{item:!0,xs:12,lg:4,children:[Object(x.jsxs)(mt.a,{sx:{border:1,borderRadius:1,color:"text.primary"},children:[Object(x.jsx)(T.a,{variant:"h5",component:"h5",sx:{p:1,color:"text.primary"},children:"Order summary"}),Object(x.jsxs)(T.a,{variant:"body1",sx:{display:"flex",justifyContent:"space-between",borderTop:1,p:1,color:"text.primary"},children:[Object(x.jsx)(mt.a,{component:"span",children:"Items:"}),Object(x.jsx)(mt.a,{component:"span",children:I.toFixed(2)})]}),Object(x.jsxs)(T.a,{variant:"body1",sx:{display:"flex",justifyContent:"space-between",borderTop:1,p:1,color:"text.primary"},children:[Object(x.jsx)(mt.a,{component:"span",children:"Tax:"}),Object(x.jsx)(mt.a,{component:"span",children:g})]}),Object(x.jsxs)(T.a,{variant:"body1",sx:{display:"flex",justifyContent:"space-between",borderTop:1,p:1,color:"text.primary"},children:[Object(x.jsx)(mt.a,{component:"span",children:"Shipping:"}),Object(x.jsx)(mt.a,{component:"span",children:f})]}),Object(x.jsxs)(T.a,{variant:"body1",sx:{display:"flex",justifyContent:"space-between",borderTop:1,p:1,color:"text.primary"},children:[Object(x.jsx)(mt.a,{component:"span",children:"Total:"}),Object(x.jsx)(mt.a,{component:"span",children:v})]})]}),!S&&Object(x.jsx)(mt.a,{sx:{pt:2},children:Object(x.jsx)(_.a,{variant:"contained",fullWidth:!0,component:o.b,to:"".concat(t,"/pay"),children:"Pay now"})})]})]}))},vt=a(151),yt=a(65),Nt=a(292);function St(e){var t=e.orderId,a=Object(yt.useStripe)(),n=Object(yt.useElements)(),c=Object(o.c)(),s=Object(l.a)(c,1)[0],i=Object(r.useState)(null),d=Object(l.a)(i,2),j=d[0],u=d[1],b=Object(r.useState)(!1),m=Object(l.a)(b,2),p=m[0],h=m[1];Object(r.useEffect)((function(){if(a){var e=s.get("payment_intent_client_secret");e&&a.retrievePaymentIntent(e).then((function(e){var t=e.paymentIntent;if(t)switch(t.status){case"succeeded":u("Payment succeeded!");break;case"processing":u("Your payment is processing.");break;case"requires_payment_method":u("Your payment was not successful, please try again.");break;default:u("Something went wrong.")}else u("Something went wrong.")}))}}),[a,s]);var O=function(){var e=Object(et.a)($e.a.mark((function e(r){var c,s;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),a&&n){e.next=3;break}return e.abrupt("return");case 3:return h(!0),e.next=6,a.confirmPayment({elements:n,confirmParams:{return_url:"".concat(window.location.origin,"/#/order/").concat(t,"/success")}});case 6:c=e.sent,"card_error"===(s=c.error).type||"validation_error"===s.type?u(s.message):u("An unexpected error occurred."),h(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)(mt.a,{sx:{p:8,display:"flex",alignItems:"center",justifyContent:"center"},children:Object(x.jsxs)("form",{id:"payment-form",onSubmit:O,children:[Object(x.jsx)(yt.PaymentElement,{id:"payment-element"}),p?Object(x.jsx)(mt.a,{sx:{pt:2},children:Object(x.jsx)(Nt.a,{loading:!0,variant:"contained",disabled:!0,loadingPosition:"end",fullWidth:!0,children:"Loading"})}):Object(x.jsx)(mt.a,{sx:{pt:2},children:Object(x.jsx)(_.a,{disabled:!a||!n,fullWidth:!0,variant:"contained",type:"submit",children:"Pay now"})}),j&&Object(x.jsx)(T.a,{variant:"body1",sx:{pt:2},children:j})]})})}var wt=function(e){var t={headers:{Authorization:oe()}};return C.a.post("/api/orders/".concat(e.id,"/create-payment-intent/"),e,t).then((function(e){return e.data}))},Pt=Object(vt.a)("pk_test_51KCPqxHMVUaGJvsh1qg2kZa05akev6LJzMzREAYfYSWBUOWeccH3nwIoNKLefa1ukBvru5YFppjhT6jx7XpvHjJx00CLZIDBEU"),It={theme:"stripe",variables:{colorPrimary:"#1469bd"}},Ct=function(){var e=Object(d.h)().id,t=gt(e).orderDetails;!function(e){var t=Object(d.g)();r.useEffect((function(){(null===e||void 0===e?void 0:e.isPaid)&&t("/order/".concat(e.id,"/success"))}),[t,e])}(t);var a=function(){var e=Object(j.useMutation)((function(e){return wt(e).then((function(e){return e}))}));return{createPaymentIntent:e.mutate,createPaymentIntentData:e.data}}(),n=a.createPaymentIntent,c=a.createPaymentIntentData;if(r.useEffect((function(){t&&n({id:t.id,totalPrice:+t.totalPrice})}),[n,e,t]),!c||!e||!t)return null;var s={clientSecret:c.clientSecret,appearance:It};return Object(x.jsxs)(mt.a,{sx:{pt:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(x.jsxs)(T.a,{variant:"h5",children:["Pay: \u20ac",t.totalPrice]}),Object(x.jsx)(yt.Elements,{options:s,stripe:Pt,children:Object(x.jsx)(St,{orderId:e})})]})};var kt=function(e){var t={headers:{Authorization:oe()}};return C.a.put("/api/orders/".concat(e.orderId,"/pay/"),e,t).then((function(e){return e.data}))},Et=a(309),Lt=function(){var e=Object(d.h)().id,t=Object(o.c)(),a=Object(l.a)(t,1)[0],n=gt(e),c=n.orderDetails,s=n.orderDetailsError,i=n.orderDetailsLoading,u=function(){var e=Object(j.useMutation)((function(e){return kt(e).then((function(e){return e}))}));return{updateOrderToPaid:e.mutate,updateOrderToPaidLoading:e.isLoading,updateOrderToPaidError:e.error}}(),b=u.updateOrderToPaid,m=u.updateOrderToPaidError,p=u.updateOrderToPaidLoading;return r.useEffect((function(){var e=a.get("payment_intent");e&&c&&!c.isPaid&&b({orderId:c.id,paymentIntentId:e})}),[c,b,a]),i||p?Object(x.jsx)(z,{}):m||s?Object(x.jsx)(Ze.a,{container:!0,sx:{p:4},children:Object(x.jsx)(Y.a,{severity:"error",sx:{width:"100%"},children:Object(x.jsx)(Et.a,{children:"Error updating order to paid"})})}):Object(x.jsx)(Ze.a,{container:!0,direction:"column",sx:{p:4},children:Object(x.jsxs)(Y.a,{severity:"success",children:[Object(x.jsxs)(Et.a,{children:["Successful payment for order ",e]}),"See order info"," ",Object(x.jsx)(o.b,{to:"/order/".concat(e),style:{color:"black"},children:"here"})]})})},qt=function(){var e=Object(et.a)($e.a.mark((function e(){var t;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C()({method:"get",url:"/api/orders/myorders/",headers:{Authorization:oe()}});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ft=qt;var Tt=function(){var e=function(){var e=Object(j.useQuery)({queryKey:["myOrders"],queryFn:function(){return Ft().then((function(e){return e}))}});return{myOrders:e.data,myOrdersLoading:e.isLoading,myOrdersError:e.isError}}(),t=e.myOrders,a=e.myOrdersError,r=e.myOrdersLoading;return r?Object(x.jsx)(z,{}):!r&&a?Object(x.jsx)(A,{}):Object(x.jsxs)(Ze.a,{container:!0,direction:"column",sx:{px:8,py:4},children:[Object(x.jsxs)(o.b,{to:"/users/profile",className:"go-back-link",children:[Object(x.jsx)("div",{children:Object(x.jsx)(Ce.a,{fontSize:"small"})}),Object(x.jsx)("p",{children:"go back"})]}),Object(x.jsx)(Ze.a,{item:!0,children:Object(x.jsx)("h1",{children:"My Orders"})}),Object(x.jsx)(Ze.a,{item:!0,children:Object(x.jsx)(qe.a,{component:De.a,children:Object(x.jsxs)(ke.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(x.jsx)(Fe.a,{children:Object(x.jsxs)(Te.a,{children:[Object(x.jsx)(Le.a,{children:"Order number"}),Object(x.jsx)(Le.a,{children:"Date"}),Object(x.jsx)(Le.a,{children:"Total"}),Object(x.jsx)(Le.a,{children:"Paid"})]})}),Object(x.jsx)(Ee.a,{children:t.map((function(e){return Object(x.jsxs)(Te.a,{component:o.b,to:"/order/".concat(e.id),sx:{"&:last-child td, &:last-child th":{border:0},textDecoration:"none"},children:[Object(x.jsx)(Le.a,{children:e.id}),Object(x.jsx)(Le.a,{scope:"row",children:new Date(e.createdAt).toLocaleDateString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",weekday:"long",hour:"2-digit",hour12:!1,minute:"2-digit",second:"2-digit"})}),Object(x.jsxs)(Le.a,{children:["\u20ac ",e.totalPrice]}),Object(x.jsx)(Le.a,{children:e.isPaid?"Yes":"No"})]},e.id)}))})]})})})]})},Dt=new j.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});function Bt(){var e=r.useState([]),t=Object(l.a)(e,2),a=t[0],n=t[1],c=r.useState(!1),s=Object(l.a)(c,2),o=s[0],u=s[1],b=r.useState([]),m=Object(l.a)(b,2),p=m[0],h=m[1],O=r.useState(!1),g=Object(l.a)(O,2),f=g[0],v=g[1],y=r.useState(""),S=Object(l.a)(y,2),P=S[0],I=S[1],C=r.useState(!1),k=Object(l.a)(C,2),E=k[0],L=k[1],q=Object(d.g)(),F=function(){q("/login"),localStorage.removeItem("token"),v(!1)},T=function(e,t){var a=Object(d.g)(),r=Object(j.useMutation)((function(e){return Se(e).then((function(e){return e}))}),{onSuccess:function(t){localStorage.setItem("token",t.token),a("/users/profile"),e()},onError:function(){t()}});return{userProfileUpdate:r.mutate,userProfileUpdateLoading:r.isLoading,userProfileUpdateError:r.isError,userProfileUpdateData:r.data}}((function(){L(!0)}),(function(){I("Something went wrong, please try again.")})),D=T.userProfileUpdate;return r.useEffect((function(){var e=localStorage.getItem("cartItems");e&&h(JSON.parse(e))}),[a]),r.useEffect((function(){return p.length>0&&u(!0),function(){u(!1)}}),[p.length]),r.useEffect((function(){var e=localStorage.getItem("token");if(e){v(!0);var t=Ne(e);if(new Date(1e3*t.exp)<new Date)return q("/login"),localStorage.removeItem("token"),void v(!1)}}),[q]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(N,{hasCartItems:o,hasTokenInLocalStorage:f}),Object(x.jsx)(Z,{children:Object(x.jsxs)(d.d,{children:[Object(x.jsx)(d.b,{path:"/",element:Object(x.jsx)(w,{})}),Object(x.jsx)(d.b,{path:"/plants",element:Object(x.jsx)(R,{})}),Object(x.jsx)(d.b,{path:"/plants/:id",element:Object(x.jsx)($,{handleAddToCart:function(e,t,r){if(a.find((function(e){return e.plantId===t}))){var c=a.map((function(a){return a.plantId===t?{plantId:t,plantUnitPrice:r,quantity:e+a.quantity}:a}));n(c),localStorage.setItem("cartItems",JSON.stringify(c))}else n([].concat(Object(i.a)(a),[{quantity:e,plantId:t,plantUnitPrice:r}])),localStorage.setItem("cartItems",JSON.stringify([].concat(Object(i.a)(a),[{quantity:e,plantId:t,plantUnitPrice:r}])))}})}),Object(x.jsx)(d.b,{path:"/login",element:Object(x.jsx)(ne,{})}),Object(x.jsx)(d.b,{path:"/register",element:Object(x.jsx)(le,{})}),Object(x.jsx)(d.b,{path:"/users/profile",element:Object(x.jsx)(pe,{handleLogOut:F,isUpdateUserProfileSuccess:E,updateUserProfileSuccessMessage:function(){L(!1)}})}),Object(x.jsx)(d.b,{path:"/users/profile/update",element:Object(x.jsx)(Oe,{handleLogOut:F,updateUserProfileErrorMessage:P,handleUserProfileUpdate:function(e){D(e)}})}),Object(x.jsx)(d.b,{path:"/admin/plantlist",element:Object(x.jsx)(rt,{})}),Object(x.jsx)(d.b,{path:"/cart",element:Object(x.jsx)(ye,{cartArrayFromStorage:p,handleRemoveToCart:function(e){var t=p.filter((function(t){return t.plantId!==e}));n(t),localStorage.setItem("cartItems",JSON.stringify(t))}})}),Object(x.jsxs)(d.b,{path:"/checkout",element:Object(x.jsx)(lt,{}),children:[Object(x.jsx)(d.b,{path:"shipping",element:Object(x.jsx)(jt,{})}),Object(x.jsx)(d.b,{path:"place-order",element:Object(x.jsx)(ht,{emptyCart:function(){n([]),localStorage.setItem("cartItems",JSON.stringify([]))}})})]}),Object(x.jsx)(d.b,{path:"/order/:id",element:Object(x.jsx)(ft,{})}),Object(x.jsx)(d.b,{path:"/order/:id/pay",element:Object(x.jsx)(Ct,{})}),Object(x.jsx)(d.b,{path:"/order/:id/success",element:Object(x.jsx)(Lt,{})}),Object(x.jsx)(d.b,{path:"/myorders",element:Object(x.jsx)(Tt,{})})]})})]})}var Mt=function(){return Object(x.jsx)(j.QueryClientProvider,{client:Dt,children:Object(x.jsx)(o.a,{children:Object(x.jsx)(Bt,{})})})};s.a.render(Object(x.jsx)(n.a.StrictMode,{children:Object(x.jsx)(Mt,{})}),document.getElementById("root"))},98:function(e,t,a){}},[[228,1,2]]]);
//# sourceMappingURL=main.a32d2483.chunk.js.map